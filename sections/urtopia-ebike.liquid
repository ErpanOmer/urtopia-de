{% assign carbon1_Sirius = "https://cdn.shopify.com/s/files/1/0633/2068/6808/files/20230630-181731.png?v=1688120408" %}
{% assign carbon1_Paris = "https://cdn.shopify.com/s/files/1/0583/5810/4213/files/Mask_Group_18150_2x_63ea456b-69c1-4d96-988f-efa931148bc1.png?v=1677640442" %}
{% assign carbon1_Lyra = "https://cdn.shopify.com/s/files/1/0583/5810/4213/files/Mask_Group_18139_2x_ee2cf1ae-8693-42a3-ab99-d53ea78e2802.png?v=1677640511" %}
{% assign carbon1_Vanilla = "https://cdn.shopify.com/s/files/1/0633/2068/6808/files/20230420-182731.jpg?v=1681986478" %}

{% assign chord_white = "https://cdn.shopify.com/s/files/1/0583/5810/4213/files/1_1_2x_3f9f6132-5cac-4f49-bac7-ce6258edad1c.jpg?v=1689154301" %}
{% assign chord_black = "https://cdn.shopify.com/s/files/1/0583/5810/4213/files/3_1_2x_c75e6ef5-a3ac-49af-bb2f-c19dd565cfad.jpg?v=1689154308" %}
{% assign chordx_white = "https://cdn.shopify.com/s/files/1/0583/5810/4213/files/chordX_2x_fe86f1a1-6d47-4dd4-b1b9-80ee149da0fe.jpg?v=1689154670" %}
{% assign chordx_black = "https://cdn.shopify.com/s/files/1/0583/5810/4213/files/20231009-150822.png?v=1696835332" %}

{{ 'outlet.scss.css' | asset_url | stylesheet_tag: preload: true }}
{% assign carbon = all_products["outlet-carbon-1-1s"] %}

<div class="banner">
    <img class="pcHide" src="https://cdn.shopify.com/s/files/1/0633/2068/6808/files/Group_23021_2x_bcacbc32-901a-4c70-9b3e-d5829121d9e2.png?v=1697440195" alt="">
    <img class="mobileHide" src="https://cdn.shopify.com/s/files/1/0633/2068/6808/files/Group_22944_2x_82f021fc-cd96-4faf-8709-e9d3ca42f1c0.png?v=1697439503" alt="">
    <div class="texts">
        <div class="u48DemiBold_v2">The Best Lightweight E-Bikes</div>
        <div class="u30DemiBold_v2">EARLY BLACK FRIDAY DEALS</div>
        <div class="u17DemiBold_v2">LOWEST PRICE OF THE YEAR GUARANTEED!</div>
    </div>
    <img class="mobileHide" src="https://cdn.shopify.com/s/files/1/0633/2068/6808/files/Group_22945_2x_bd38b788-5417-4e57-ac68-63f799f20b7c.png?v=1697439494" alt="">
</div>
<div class="centeral-content u14Light_v2 tips">*For any order during Oct 1 - Dec 31 2023, if there is a price drop within this period on our website, you can request a refund for the difference by contacting our support. The refund will be automatically approved and returned to your account.</div>
<div class="centeral-content ebike-products">
    <div class="u36DemiBold_v2">Pick your style</div>
    <div class="u24Medium_v2">An all-in-one e-bike with a lightweight frame, GPS, navigation, and a speaker for the ultimate ride. And here’s the kicker – nobody can even tell you’re on an electric bike.</div>
    <div class="product-grid">
        {% assign product = all_products["urtopia-carbon-e-bike"] %}
        {% assign product_variants = product.variants | where: "available" %}
        {% assign product_tags = settings.carbon_ebike_free_accessories_count | append: ' Freebies'   %}
        {% render 'product-card',
            product_variants: product_variants,
            product_variant_options_find_sort: "M,L,S",
            product_name: 'Carbon 1/1s',
            product_description: 'Powerful drive system ensures minimal effort and maximum fun',
            product_discount_price: settings.carbon_ebike_discount_price,
            product_url: product.url,
        %}
        {% assign product = all_products["urtopia-chord-ebike"] %}
        {% assign product_variants = product.variants | where: "option1", "High-Step" | where: "available" %}
        {% render 'product-card',
            product_variants: product_variants,
            product_name: 'Chord',
            product_description: 'Elegantly zip around town for meet-ups, errands, or Sunday fun.',
            product_discount_price: settings.chord_ebike_discount_price,
            product_url: product.url,
        %}
        {% assign product_variants = product.variants | where: "option1", "Step-Through" | where: "available" %}
        {% render 'product-card',
            product_variants: product_variants,
            product_name: 'Chord X',
            product_description: 'Easily kickstart your ride for workouts, city cruising, and pure enjoyment.',
          product_discount_price: settings.chord_ebike_discount_price,
            product_url: product.url,
        %}
    </div>
</div>

<div class="gray-background-color top-area">
    <div class="centeral-content">
        <div class="u72DemiBold_v2">OUTLET</div>
        <div class="u24Medium_v2">The Urtopia Outlet includes demo e-bikes with the same quality and performance as new ones. The e-bikes are tested by our engineers for our customers. Also, meticulous quality control measures are implemented prior to offering them for sale.</div>
        <div class="product item">
            <div>
                <div class="u36DemiBold_v2">Outlet Carbon 1</div>
                <div class="u20Light_v2">Fit for 175 - 195 cm</div>
                <div class="u30DemiBold_v2 emphasize" data-price={{ carbon.compare_at_price | money_without_trailing_zeros }}>{{ carbon.price | money_without_trailing_zeros }}</div>
                <div class="dots">
                    <div data-img="{{ carbon1_Sirius }}" data-variant="43935607259352" orange class="active"></div>
                    <div data-img="{{ carbon1_Paris }}" data-variant="43935607324888" yellow></div>
                    <div data-img="{{ carbon1_Lyra }}" data-variant="43935607292120" gray></div>
                    <!--<div data-img="{{ carbon1_Vanilla }}" data-variant="43935607357656" peach></div>-->
                </div>
                <a href="/products/outlet-carbon-1-1s?variant=43935607259352" class="my-button my-button-origin">Order now</a>
            </div>
            <div style="flex: 1.5;">
                <img src="{{carbon1_Sirius}}" alt="">
                <div class="u48DemiBold_v2 off">{{ carbon.compare_at_price | minus: carbon.price | money_without_trailing_zeros }} OFF</div>
            </div>
        </div>
        <!--<div class="product-chord">
            <div class="item">
                <div class="u36DemiBold_v2 mobileHide">Outlet Chord</div>
                <div class="u24DemiBold_v2 mobileHide">{{ chord.compare_at_price | minus: chord.price | money_without_trailing_zeros }} OFF</div>
                <div style="position: relative;">
                    <img src="{{ chord_white }}" alt="">
                    <div class="u48DemiBold_v2 off pcHide">{{ chord.compare_at_price | minus: chord.price | money_without_trailing_zeros }} OFF</div>
                </div>
                <div class="u36DemiBold_v2 pcHide">Outlet Chord</div>
                <div class="u20Light_v2 pcHide">Fit for 170cm - 195cm</div>
                <div class="price">
                    <div class="dots">
                        <div data-img="{{ chord_white }}" data-variant="43950919024856" white class="active"></div>
                        <div data-img="{{ chord_black }}" data-variant="43950919057624" black></div>
                    </div>
                    <div class="u24DemiBold_v2 emphasize" data-price={{ chord.compare_at_price | money_without_trailing_zeros }}>{{ chord.price | money_without_trailing_zeros }}</div>
                </div>
                <div class="u20Light_v2 mobileHide">Fit for 170cm - 195cm</div>
                <a href="/products/outlet-urtopia-chord?variant=43950919024856" class="my-button my-button-origin">Order now</a>
            </div>
            <div class="item">
                <div class="u36DemiBold_v2 mobileHide">Outlet Chord X</div>
                <div class="u24DemiBold_v2 mobileHide">{{ chord.compare_at_price | minus: chord.price | money_without_trailing_zeros }} OFF</div>
                <div style="position: relative;">
                    <img src="{{ chordx_white }}" alt="">
                    <div class="u48DemiBold_v2 off pcHide">{{ chord.compare_at_price | minus: chord.price | money_without_trailing_zeros }} OFF</div>
                </div>
                <div class="u36DemiBold_v2 pcHide">Outlet Chord X</div>
                <div class="u20Light_v2 pcHide">Fit for 160cm - 185cm</div>
                <div class="price">
                    <div class="dots">
                        <div data-img="{{ chordx_white }}" data-variant="43950919090392" white class="active"></div>
                        <div data-img="{{ chordx_black }}" data-variant="43950919123160" black></div>
                    </div>
                    <div class="u24DemiBold_v2 emphasize" data-price={{ chord.compare_at_price | money_without_trailing_zeros }}>{{ chord.price | money_without_trailing_zeros }}</div>
                </div>
                <div class="u20Light_v2 mobileHide">Fit for 160cm - 185cm</div>
                <a href="/products/outlet-urtopia-chord?variant=43950919090392" class="my-button my-button-origin">Order now</a>
            </div>
        </div>-->
    </div>
</div>

<script>
    $('.top-area .dots > div').on('click', e => {
        const target = $(e.target)

        const variant = target.attr('data-variant')
        const image = target.attr('data-img')

        target.siblings().removeClass('active')
        target.addClass('active')

        const item = target.closest('.item')
        item.find('img').attr('src', image)

        const button = item.find('.my-button')
        button.attr('href', `${button.attr('href').split('?').shift()}?variant=${variant}`)
    })
</script>
<script>
    $('.product-card .dots > div').on('click', e => {
        const target = $(e.target)
        const product_card = target.closest('.product-card')

        // 先取消 其它兄弟元素的active, 再设置active
        target.siblings().removeClass('active')
        target.addClass('active')

        const price = Number(target.attr('data-price'))
        const compare_at_price = Number(target.attr('data-compare-at-price'))
        const discount_price = Number(target.attr('data-product-discount-price'))
        const variant_id = target.attr('data-variant')
        const variant_image = target.attr('data-img')

        // outlet 车型
        if (discount_price === 0) {
            product_card.find('.product_price .u24DemiBold_v2').text(getPriceFormat(price, true)).attr('data-price', getPriceFormat(compare_at_price, true))
            product_card.find('.tags > span:first-child').text(`${getPriceFormat(compare_at_price - price, true)} OFF`)

            if (price === compare_at_price) {
                product_card.find('.product_price .u24DemiBold_v2').attr('data-price', '')
                product_card.find('.tags > span:first-child').hide()
            }
        } else {
            product_card.find('.product_price .u24DemiBold_v2').text(getPriceFormat(price - discount_price, true)).attr('data-price', getPriceFormat(price, true))
            product_card.find('.product_price .u17Light_v2 > span').text(getPriceFormat((price - discount_price) / 24))
            product_card.find('.tags > span:first-child').text(`${getPriceFormat(discount_price, true)} OFF`)
        }

        product_card.find('.variant-image').attr('src', variant_image)
        product_card.find('.my-button').attr('href', `${product_card.find('.my-button').attr('href').split('?').shift()}?variant=${variant_id}`)
    })

    setTimeout(() => {
        $('.product-card .dots > div:first-child').click()

        $('.product-card .variant-image').on('click', e => {
            const button = $(e.target).closest('.product-card').find('.my-button')

            if (button.length) {
                button[0].click()
            }
        })
    })
</script>