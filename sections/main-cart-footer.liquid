{{ 'component-cart.css' | asset_url | stylesheet_tag }}
{{ 'component-totals.css' | asset_url | stylesheet_tag }}
{{ 'component-price.css' | asset_url | stylesheet_tag }}
{{ 'component-discounts.css' | asset_url | stylesheet_tag }}

<style>
.product_code {
    /* display: flex; */
      margin-bottom: 20px;
}

.carbon_code {
    max-width: 410px;
    background: url(https://cdn.shopify.com/s/files/1/0633/2068/6808/files/20230324-171240.png?v=1679649232) no-repeat;
    height: 46px;
    background-size: 100% 46px;
    display: flex;
    justify-content: space-between;
    align-items: center;
    color: #fff;
    font-size: 14px;
    font-weight: 500;
    line-height: 18px;
    box-shadow: 10px 10px 10px #6B869A1C;
}

.carbon_code .bold {
    font-size: 17px;
    font-weight: bold;
}

.carbon_code > span:first-child {
    flex-basis: 68%;
}

.carbon_code > span:last-child {
    flex-basis: 32%;
}

.carbon_code > span {
    display: flex;
    align-items: center;
    justify-content: center;
}

.carbon_text {
    max-width: 410px;
    box-shadow: 10px 10px 10px #6B869A1C;
    color: #fff;
    padding: 10px 24px;
    background: transparent linear-gradient(90deg, #2E26EE 0%, #2A8FF4 100%) 0% 0% no-repeat padding-box;
    opacity: 0.78;
}

.carbon_code,
.carbon_text {
    margin-left: auto;
}

.carbon_text>div {
    display: flex;
    align-items: flex-end;
    font-weight: 500;
    line-height: 20px;
}

.carbon_text>div img {
  width: 24px;
}

.carbon_text>div+div {
    margin-top: 3px;
}

.carbon_text>div>span {
    margin-left: 10px;
}



@media (max-width: 767px) {
    .carbon_code {
        font-size: 13px;
    }

    .carbon_code .bold {
        font-size: 16px;
    }
}



.important {
  flex-basis: 1e+06%  !important;
  justify-content: flex-start  !important;
  padding-left: 24px  !important;
  height: 100%  !important;
  background-image: linear-gradient(-90deg, #EFC305, #FFDF67) !important;
}
</style>

<div class="page-width{% if cart == empty %} is-empty{% endif %}" id="main-cart-footer" data-id="{{ section.id }}">
  <div>
    <div class="product_code">
            <div class="carbon_code" style="color: #000;background-image: url(https://cdn.shopify.com/s/files/1/0633/2068/6808/files/20230425-181550.png?v=1682417764);">
              <span style="flex-basis: 75%;justify-content: flex-start;
                padding-left: 24px;">Check out with <br> Father’s Day Sale Code to Enjoy:</span>
              <span class="bold" style="flex-basis: 22%;">OK300</span>
            </div>
            <div class="carbon_text" {% if settings.enabled_labour_day %}style="color: #000;opacity:unset;background-image: linear-gradient(90deg,#FFE996,#F4D554);"{% endif %}>
                <div>
                    <img src="https://cdn.shopify.com/s/files/1/0633/2068/6808/files/payment.svg?v=1682416663" />
                    <span>Save €300.00!</span>
                </div>
                <div>
                      <img src="https://cdn.shopify.com/s/files/1/0633/2068/6808/files/payment.svg?v=1682416663" />
                    <span>Free Accessories</span>
                </div>
            </div>
    </div>
    <script>
      function refreshProductCode () {
          const has_carbon = document.querySelectorAll(`.cart-items [data-line-item-product-id="7633738727640"]`)
          const has_chord = document.querySelectorAll(`.cart-items [data-line-item-product-id="7952778658008"]`)

          let carbon_quantly = 0
          let chord_quantly = 0
          for (const iterator of [...has_carbon]) {
              carbon_quantly += parseInt(iterator.dataset.quantity)
          }

         for (const iterator of [...has_chord]) {
              chord_quantly += parseInt(iterator.dataset.quantity)
          }
    
          if (carbon_quantly > 0 && chord_quantly > 0) {
            document.querySelector(`.product_code .bold`).innerHTML = 'OK300'
            document.querySelector(`.product_code .carbon_text > div:nth-child(1) span`).innerHTML = `Save €${carbon_quantly * 173 + chord_quantly * 300}.00!`

            {% if settings.enabled_labour_day %}
                document.querySelector(`.product_code .carbon_text > div:nth-child(2) span`).innerHTML = 'Free Accessories'
            {% else %}
                document.querySelector(`.product_code .carbon_text > div:nth-child(2)`).innerHTML = ''
            {% endif %}


          } else if (chord_quantly > 0) { 
            document.querySelector(`.product_code .bold`).innerHTML = 'OK300'
            document.querySelector(`.product_code .carbon_text > div:nth-child(1) span`).innerHTML = `Save €${chord_quantly * 300}.00!`
            document.querySelector(`.product_code .carbon_text > div:nth-child(2)`).innerHTML = ''
          } else {
            if (carbon_quantly === 0) {
              document.querySelector(`.product_code`).innerHTML = ''
            } else {
              {% if settings.enabled_labour_day %}
                document.querySelector(`.product_code .carbon_code span:first-child`).innerHTML = 'Check out with Father’s Day Sale'
                document.querySelector(`.product_code .carbon_code span:first-child`).classList.add('important')

                document.querySelector(`.product_code .carbon_code span:last-child`).innerHTML = ''
                document.querySelector(`.product_code .carbon_text > div:nth-child(1) span`).innerHTML = `Save €${carbon_quantly * 173}.00!`
                document.querySelector(`.product_code .carbon_text > div:nth-child(2) span`).innerHTML = 'Free Accessories'
              {% else %}
                document.querySelector(`.product_code`).innerHTML = ''
              {% endif %}
            }
          }
      }
      
      refreshProductCode()
    </script>
                          
    <div class="cart__footer">
      {%- if settings.show_cart_note -%}
      <cart-note class="cart__note field">
        <label for="Cart-note">{{ 'sections.cart.note' | t }}</label>
        <textarea class="text-area field__input" name="note" form="cart" id="Cart-note"
          placeholder="{{ 'sections.cart.note' | t }}">{{ cart.note }}</textarea>
      </cart-note>
      {%- endif -%}

      {% assign bikeQuantity = 0 %}
      {% assign discountSavedPrice = 0 %}
      {%- for item in cart.items -%}

      {% if item.product.title contains "Carbon One"%}
      {% assign isEbike = true %}
      {%- assign bikeQuantity = bikeQuantity | plus:item.quantity -%}
      {% endif %}
      {%- assign discountSavedPrice = discountSavedPrice | plus:item.original_line_price | minus:item.final_line_price
      -%}
      {%- endfor -%}
      <div class="cart__blocks">
        {% for block in section.blocks %}
        {%- case block.type -%}
        {%- when '@app' -%}
        {% render block %}
        {%- when 'subtotal' -%}
        <div class="js-contents" {{ block.shopify_attributes }}>
          <!--diy notification-->
          {% if isEbike == true %}
          <div class="cart-notification__header-container">
            {%- assign bikeSavedPrice = bikeQuantity| times:60000 -%}
            {%- assign totalSaved = bikeSavedPrice | plus: discountSavedPrice-%}
<!--             <div class="notification-tips"><img
                src="https://cdn.shopify.com/s/files/1/0583/5810/4213/files/cart-tipsicon.png?" /><span
                style="margin:0;">You saved</span>
              {{ totalSaved | money}}!</div> -->
            <div class="notification-tips"><img
                src="https://cdn.shopify.com/s/files/1/0583/5810/4213/files/cart-tipsicon.png?" />You are
              eligible for free shipping!</div>
            <!--
            <div class="notification-tips"><img
                src="https://cdn.shopify.com/s/files/1/0583/5810/4213/files/cart-tipsicon.png?" />
              Free Accessories applied!</div>-->
          </div>
          {% endif %}
          <!---->
          <!-- 600off-->
          {% if bikeQuantity > 0 %}
          <div style="text-decoration: line-through;font-size:22px;width:100%;"
            class="cart-item__old-price price price--end">
            {{ cart.total_price |plus: totalSaved | money_with_currency }}
          </div>
          {%-endif-%}
          <!-- -->
          <div class="totals" style="width:100%;">
            <h2 class="totals__subtotal">{{ 'sections.cart.subtotal' | t }}:</h2>
            <p class="totals__subtotal-value">{{ cart.total_price | money_with_currency }}</p>
          </div>

          <div>
            {%- if cart.cart_level_discount_applications.size > 0 -%}
            <ul class="discounts list-unstyled" role="list" aria-label="{{ 'customer.order.discount' | t }}">
              {%- for discount in cart.cart_level_discount_applications -%}
              <li class="discounts__discount discounts__discount--position">
                {%- render 'icon-discount' -%}
                {{ discount.title }}
                (-{{ discount.total_allocated_amount | money }})
              </li>
              {%- endfor -%}
            </ul>
            {%- endif -%}
          </div>

          {% if cart != empty %}

          {% if isEbike == true %}
          <small class="tax-note caption-large rte">
            Free shipping
          </small>
          <small class="tax-note caption-large rte">
            Taxes calculated at checkout
          </small>
          {% else %}
          <small class="tax-note caption-large rte">
            Taxes and shipping calculated at checkout
          </small>
          {% endif %}

          {% endif %}
        </div>
        <!--
        <klarna-placement data-key="credit-promotion-badge" data-locale="de-DE" data-purchase-amount="">
        </klarna-placement>-->
        {%- else -%}
        <div class="cart__ctas" {{ block.shopify_attributes }}>
          <noscript>
            <button type="submit" class="cart__update-button button button--secondary" form="cart">
              {{ 'sections.cart.update' | t }}
            </button>
          </noscript>

          <button onclick="obApi('track', 'Checkout');" type="submit" id="checkout" class="cart__checkout-button button"
            name="checkout" {% if cart==empty %} disabled{% endif %} form="cart">
            {{ 'sections.cart.checkout' | t }}
          </button>
        </div>
        <div style="width: 100%;" class="my-button my-button-black">Leasing</div>
        {% comment %}
        {%- if additional_checkout_buttons -%}
        <div class="cart__dynamic-checkout-buttons additional-checkout-buttons">
          {{ content_for_additional_checkout_buttons }}
        </div>
        {%- endif -%}
        {% endcomment %}
        {%- endcase -%}
        {% endfor %}

        <div>
          <ul class="list list-payment" style="justify-content: flex-start;" role="list">
            <li class="list-payment__item">
              <svg class="icon icon--full-color" xmlns="http://www.w3.org/2000/svg" height="24"
                viewBox="0 0 100 40.4494">
                <defs>
                  <style>
                    .cls-1 {
                      fill: #ffb3c7;
                    }
                  </style>
                </defs>
                <g id="Lager_2" data-name="Lager 2">
                  <g id="Layer_1" data-name="Layer 1">
                    <rect class="cls-1" width="100" height="40.4494" rx="11.7384"></rect>
                    <path
                      d="M80.0772,17.7235a6.194,6.194,0,1,0,0,10.2373v.75h3.5145V16.9727H80.0772Zm-3.1964,8.1388a3.0243,3.0243,0,1,1,3.1849-3.02A3.1059,3.1059,0,0,1,76.8808,25.8623Z">
                    </path>
                    <rect x="28.2027" y="11.7416" width="3.678" height="16.9694"></rect>
                    <path
                      d="M64.1542,16.6569a4.2694,4.2694,0,0,0-3.62,1.6383V16.9733h-3.5V28.711h3.5421V22.5424a2.4754,2.4754,0,0,1,2.6383-2.6591c1.5447,0,2.4325.9228,2.4325,2.6348V28.711h3.5107V21.2464C69.1577,18.5146,66.9857,16.6569,64.1542,16.6569Z">
                    </path>
                    <path
                      d="M43,17.7235a6.194,6.194,0,1,0,0,10.2373v.75h3.5145V16.9727H43Zm-3.1965,8.1388a3.0243,3.0243,0,1,1,3.1845-3.02A3.1058,3.1058,0,0,1,39.8034,25.8623Z">
                    </path>
                    <path
                      d="M51.9513,18.5017V16.9728H48.353V28.7111h3.606v-5.48c0-1.8491,2.0042-2.843,3.3949-2.843.014,0,.0276.0014.0417.0015V16.9735A4.3821,4.3821,0,0,0,51.9513,18.5017Z">
                    </path>
                    <path d="M87.323,24.5476a2.2059,2.2059,0,1,0,2.206,2.2059A2.2057,2.2057,0,0,0,87.323,24.5476Z">
                    </path>
                    <path
                      d="M25.6675,11.7384H21.8558a9.7488,9.7488,0,0,1-3.9412,7.8678l-1.51,1.131,5.8513,7.9792h4.8106l-5.3837-7.342A13.5049,13.5049,0,0,0,25.6675,11.7384Z">
                    </path>
                    <rect x="12.1204" y="11.7384" width="3.8185" height="16.9773"></rect>
                  </g>
                </g>
              </svg>
            </li>
            <li class="list-payment__item">
                <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="60.75" height="22" viewBox="0 0 60.75 22"><image width="60.75" height="22" xlink:href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAPMAAABYCAYAAAAgLcESAAAACXBIWXMAAAsTAAALEwEAmpwYAAAE9WlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgOS4wLWMwMDEgNzkuMTRlY2I0MmYyYywgMjAyMy8wMS8xMy0xMjoyNTo0NCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczpkYz0iaHR0cDovL3B1cmwub3JnL2RjL2VsZW1lbnRzLzEuMS8iIHhtbG5zOnBob3Rvc2hvcD0iaHR0cDovL25zLmFkb2JlLmNvbS9waG90b3Nob3AvMS4wLyIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0RXZ0PSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VFdmVudCMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIDI0LjIgKE1hY2ludG9zaCkiIHhtcDpDcmVhdGVEYXRlPSIyMDIzLTAzLTMwVDIxOjM4OjU4KzA4OjAwIiB4bXA6TW9kaWZ5RGF0ZT0iMjAyMy0wMy0zMFQyMTo0MDo1NiswODowMCIgeG1wOk1ldGFkYXRhRGF0ZT0iMjAyMy0wMy0zMFQyMTo0MDo1NiswODowMCIgZGM6Zm9ybWF0PSJpbWFnZS9wbmciIHBob3Rvc2hvcDpDb2xvck1vZGU9IjMiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6NDI2MjBmMzUtODI0Ni00ODc1LWJlM2EtY2U4ZjYzNDFmMTlmIiB4bXBNTTpEb2N1bWVu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"/></svg>
            </li>
            {%- for type in shop.enabled_payment_types -%}
            {% if type=="generic" %}
            {% continue %}
            {% endif %}
            <li class="list-payment__item">
              {{ type | payment_type_svg_tag: class:"icon icon--full-color" }}
            </li>
            {%- endfor -%}
          </ul>
        </div>
        <div id="cart-errors"></div>
      </div>
    </div>
  </div>
</div>
<style>
  .shopify-app-block klarna-placement>div {
    margin: 15px 0;
  }
</style>
<script>
  //Bing UET
  document.querySelector('#checkout').addEventListener('click', function () {
    window.uetq = window.uetq || []; window.uetq.push('event', 'begin_checkout', { "revenue_value": 1, "currency": "USD" });
  })
  //
  document.addEventListener('DOMContentLoaded', function () {
    function isIE() {
      const ua = window.navigator.userAgent;
      const msie = ua.indexOf('MSIE ');
      const trident = ua.indexOf('Trident/');

      return (msie > 0 || trident > 0);
    }

    if (!isIE()) return;
    const cartSubmitInput = document.createElement('input');
    cartSubmitInput.setAttribute('name', 'checkout');
    cartSubmitInput.setAttribute('type', 'hidden');
    document.querySelector('#cart').appendChild(cartSubmitInput);
    document.querySelector('#checkout').addEventListener('click', function (event) {
      document.querySelector('#cart').submit();
    });
  });


  // 如果carbon车 不存在
  if (!document.querySelector('.cart-items [data-line-item-product-id="7633738727640"]')) {
    $('.cart__footer .my-button-black').hide()
  }


  $('.cart__footer .my-button-black').on('click', e => {
      const carbon = document.querySelector('.cart-items [data-line-item-product-id="7633738727640"]')
      const options = carbon.querySelectorAll('.cart-item__details > dl .product-option')
      let accessories = Array.from(document.querySelectorAll('.cart-items .cart-item__details > a')).map(a => {

        const title = a.innerText

        // 排除掉 chord
        if (!title.includes('Chord') && title !== 'Urtopia Carbon 1') {
          return title.split('-').shift().trim()
        }

        return null
      }).filter(Boolean)

      // 去重
      accessories = Array.from(new Set(accessories))

      console.log(accessories)

      const bike_style = options[0].innerText.slice(7)
      const bike_size = options[1].innerText.slice(6, 7)

      // go to
      window.location.href= `/pages/ebike-leasing?bike_style=${bike_style}&bike_size=${bike_size}&accessories=${accessories.join()}&utm_source=cart_page`
  })

  
</script>

{% schema %}
{
"name": "t:sections.main-cart-footer.name",
"class": "cart__footer-wrapper",
"blocks": [
{
"type": "subtotal",
"name": "t:sections.main-cart-footer.blocks.subtotal.name",
"limit": 1
},
{
"type": "buttons",
"name": "t:sections.main-cart-footer.blocks.buttons.name",
"limit": 1
},
{
"type": "@app"
}
]
}
{% endschema %}