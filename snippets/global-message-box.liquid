<div class="message-box pcHide mobileHide">
  <div class="u17DemiBold_v2">
    <span>Factory</span>
    <div>
        <div></div>
        <div>OUTLET</div>
        <div></div>
    </div>
  </div>
  <div class="u11Light_v2">We have showroom bike now available at a lower cost, all with the same Urtopia quality, guarantee and service.</div>
  <a class="my-button my-button-black" onclick="hideMessageBox()" href="/products/outlet-carbon-1-1s">Shop now</a>
  <span class="close" onclick="hideMessageBox()">×</span>
</div>

<script>
  const message_box_name = 'message_box'
  // 这些页面弹出屏蔽
  const ignore_page_ids = ['product.pf-8d61060d', 'product.pf-d095440b']

  function hideMessageBox() {
    sessionStorage.setItem(message_box_name, message_box_name);

    $('.message-box').animate({}, 300, function () {
      //第一个花括号里面是动画内容，可以为空，但不能省去中括号
      $('.message-box').css(global_config.is_mobile ? { transform: 'translateY(100%)' } : { right: '-360px' }); //在回调函数里面改变css属性来实现transform中的动画变换
    });
  }

  function showMessageBox() {
    if (global_config.message_box_is_hide) {
      return
    }
    
    if (ignore_page_ids.includes(current_page_id)) {
      return
    }

    if (sessionStorage.getItem(message_box_name)) {
      return;
    }

    $('.message-box').animate({}, 300, function () {
      //第一个花括号里面是动画内容，可以为空，但不能省去中括号
      $('.message-box').css(global_config.is_mobile ? { transform: 'translateY(0)' } : { right: '18px' }); //在回调函数里面改变css属性来实现transform中的动画变换
    });
  }

  window.addEventListener('load', () => setTimeout(showMessageBox, global_config.message_box_show_delay_time * 1000));
</script>
