<script>
    $('main').on('click', function (event) {
        event.preventDefault()
        const t = event.target

        if (t.nodeName.toLocaleLowerCase() === 'a') {
            const href = t.getAttribute('href') || ''
            const target = t.getAttribute("target")

            // 排除#开头的
            if (href.startsWith('#')) {
                return
            }


            let path = ''

            try {
                const url = new URL(href)

                // 如果是外部url
                if (window.location.origin !== url.origin && !window.__SHOPIFY_CLI_ENV__) {
                    return
                }

                path = url.pathname + url.search
            } catch(e) {
                path = href
            }

            // 排除不是en 开头的
            if (!window.location.pathname.startsWith('/en')) {
                return
            }

            

            path = '/en' + path

            if (target === '_blank') {
                window.open(path)
            } else {
                window.location.href = path
            }

            console.log('target', path)
        }


        
    })
</script>